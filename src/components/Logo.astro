---
import { siteConfig } from "../config/site";

interface Props {
  width?: number;
  height?: number;
  color?: string;
}

const { width = 140, height = 32, color = "currentColor" } = Astro.props;
const hasEmoji = siteConfig.logo.emoji && siteConfig.logo.emoji.trim() !== "";
const hasLogo = !hasEmoji && siteConfig.logo.src && siteConfig.logo.src.trim() !== "";
const hasTemplateName = siteConfig.templateName && siteConfig.templateName.trim() !== "";
const nameAccent = 'nameAccent' in siteConfig ? (siteConfig as any).nameAccent : '';
---

<div class="logo-container" style={`color: ${color};`}>
  {hasEmoji && (
    <span class="logo-emoji">{siteConfig.logo.emoji}</span>
  )}
  {hasLogo && (
    <img
      src={siteConfig.logo.src}
      alt={siteConfig.logo.alt}
      class="logo-mark"
      width={siteConfig.logo.width}
      height={siteConfig.logo.height}
      loading="eager"
    />
  )}
  <span class="logo-text">
    <span class="logo-name">{siteConfig.name}{nameAccent && <span class="logo-name-accent">{nameAccent}</span>}</span>
    {hasTemplateName && !nameAccent && <span class="logo-template">{siteConfig.templateName}</span>}
  </span>
</div>

<style>
  .logo-container {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .logo-emoji {
    font-size: 1.5rem;
    line-height: 1;
    flex-shrink: 0;
  }

  .logo-mark {
    display: block;
    flex-shrink: 0;
    flex-grow: 0;
    object-fit: contain;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }

  .logo-text {
    display: flex;
    align-items: baseline;
    gap: 6px;
    flex-shrink: 0;
    white-space: nowrap;
  }

  .logo-name {
    font-family: var(--header-logo-font, var(--font-sans));
    font-weight: 700;
    font-size: var(--header-logo-size, 1.25rem);
    letter-spacing: -0.5px;
    color: var(--header-logo-color, var(--text-primary));
  }

  .logo-name-accent {
    color: var(--header-logo-accent-color, var(--accent-primary));
  }

  .logo-template {
    font-family: var(--header-logo-font, var(--font-sans));
    font-weight: 300;
    font-size: var(--header-logo-size, 1.25rem);
    letter-spacing: -0.3px;
    color: var(--header-logo-accent, var(--text-primary));
  }
</style>
