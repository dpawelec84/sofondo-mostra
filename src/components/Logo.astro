---
import { siteConfig } from "../config/site";

interface Props {
  width?: number;
  height?: number;
  color?: string;
}

const { width = 140, height = 32, color = "currentColor" } = Astro.props;
const hasEmoji = siteConfig.logo.emoji && siteConfig.logo.emoji.trim() !== "";
const hasLogo = !hasEmoji && siteConfig.logo.src && siteConfig.logo.src.trim() !== "";
const hasTemplateName = siteConfig.templateName && siteConfig.templateName.trim() !== "";
const nameAccent = 'nameAccent' in siteConfig ? (siteConfig as any).nameAccent : '';
const logoMark = 'logoMark' in siteConfig ? (siteConfig as any).logoMark : 'icon-text';
const logoChar = 'char' in siteConfig.logo ? (siteConfig.logo as any).char : siteConfig.name.charAt(0);
const isGradientBox = logoMark === 'gradient-box';
---

<div class="logo-container" style={`color: ${color};`}>
  {isGradientBox && (
    <span class="logo-icon">{logoChar}</span>
  )}
  {!isGradientBox && hasEmoji && (
    <span class="logo-emoji">{siteConfig.logo.emoji}</span>
  )}
  {!isGradientBox && hasLogo && (
    <img
      src={siteConfig.logo.src}
      alt={siteConfig.logo.alt}
      class="logo-mark"
      width={siteConfig.logo.width}
      height={siteConfig.logo.height}
      loading="eager"
    />
  )}
  <span class="logo-text">
    <span class="logo-name">{siteConfig.name}{nameAccent && <span class="logo-name-accent">{nameAccent}</span>}</span>
    {hasTemplateName && !nameAccent && <span class="logo-template">{siteConfig.templateName}</span>}
  </span>
</div>

<style>
  .logo-container {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .logo-emoji {
    font-size: 1.5rem;
    line-height: 1;
    flex-shrink: 0;
  }

  /* Gradient box logo icon (startup/SaaS style) */
  .logo-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    background: var(--logo-icon-gradient, linear-gradient(135deg, #a855f7, #6366f1));
    border-radius: 8px;
    font-family: var(--header-logo-font, var(--font-serif));
    font-size: 1rem;
    font-weight: 600;
    color: #ffffff;
    flex-shrink: 0;
  }

  .logo-mark {
    display: block;
    flex-shrink: 0;
    flex-grow: 0;
    object-fit: contain;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }

  .logo-text {
    display: flex;
    align-items: baseline;
    gap: 6px;
    flex-shrink: 0;
    white-space: nowrap;
  }

  .logo-name {
    font-family: var(--header-logo-font, var(--font-sans));
    font-weight: var(--header-logo-weight, 600);
    font-size: var(--header-logo-size, 1.25rem);
    letter-spacing: var(--header-logo-letter-spacing, 0);
    color: var(--header-logo-color, var(--text-primary));
  }

  .logo-name-accent {
    color: var(--header-logo-accent-color, var(--accent-primary));
  }

  .logo-template {
    font-family: var(--header-logo-font, var(--font-sans));
    font-weight: 300;
    font-size: var(--header-logo-size, 1.25rem);
    letter-spacing: -0.3px;
    color: var(--header-logo-accent, var(--text-primary));
  }
</style>
